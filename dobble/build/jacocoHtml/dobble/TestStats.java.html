<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TestStats.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">miniprojet</a> &gt; <a href="index.source.html" class="el_package">dobble</a> &gt; <span class="el_source">TestStats.java</span></div><h1>TestStats.java</h1><pre class="source lang-java linenums">package dobble;

import java.util.Scanner;

import dobble.Stats.BddException;

<span class="nc" id="L7">public class TestStats {</span>

	public static void main(String[] args) {

<span class="nc" id="L11">		Scanner sc= new Scanner(System.in);</span>
		while(true)
		{
<span class="nc" id="L14">			System.out.println(&quot;\n\n\n\n\nTest de la classe Stats\n\n&quot;</span>
					+ &quot;\t1:lecture sur la bdd\n&quot;
					+ &quot;\t2:constructeur\n&quot;
					+ &quot;\t3:equals\n&quot;
					+ &quot;\t4:sauvegarde sur la bdd (fais appel a 1:lecture sur la bdd)\n&quot;
					+ &quot;\t5:quitter&quot;);
<span class="nc bnc" id="L20" title="All 6 branches missed.">			switch(sc.nextInt())</span>
			{
				case 1:
<span class="nc" id="L23">					bdd();</span>
<span class="nc" id="L24">					break;</span>
				case 2:
<span class="nc" id="L26">					constructeur();</span>
<span class="nc" id="L27">					break;</span>
				case 3:
<span class="nc" id="L29">					equals();</span>
<span class="nc" id="L30">					break;</span>
				case 4:
<span class="nc" id="L32">					sauvegarder();</span>
<span class="nc" id="L33">					break;</span>
				case 5:
<span class="nc" id="L35">					sc.close();</span>
<span class="nc" id="L36">					System.exit(0);</span>
			}
		}
		
	}
	
	
	
	private static void sleep()
	{
		try {
<span class="nc" id="L47">			Thread.sleep(2000);</span>
<span class="nc" id="L48">		} catch (InterruptedException e1) {</span>
<span class="nc" id="L49">		}</span>
<span class="nc" id="L50">	}</span>

	
	private static void bdd()
	{
<span class="nc" id="L55">		Stats st=new Stats();</span>
<span class="nc" id="L56">		String id=&quot;&quot;;</span>
<span class="nc" id="L57">		String mdp=&quot;jambon&quot;;</span>
		
		//test id vide
		
		
<span class="nc" id="L62">		System.out.println(&quot;\ntest de recuperation des stats avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
		try {
<span class="nc" id="L64">			System.out.println(st.getBddStat(id, mdp));</span>
<span class="nc" id="L65">		} catch (Exception e) {</span>
<span class="nc" id="L66">			e.printStackTrace();</span>
<span class="nc" id="L67">		}</span>
		
<span class="nc" id="L69">		sleep();</span>
		
		
		//test id faux
<span class="nc" id="L73">		id=&quot;marc&quot;;</span>
<span class="nc" id="L74">		mdp=&quot;jambon&quot;;</span>
		
<span class="nc" id="L76">		System.out.println(&quot;\ntest de recuperation des stats avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
		try {
<span class="nc" id="L78">			System.out.println(st.getBddStat(id, mdp));</span>
<span class="nc" id="L79">		} catch (Exception e) {</span>
<span class="nc" id="L80">			e.printStackTrace();</span>
<span class="nc" id="L81">		}</span>
		
<span class="nc" id="L83">		sleep();</span>
		
		//test mdp faux
<span class="nc" id="L86">		id=&quot;toto&quot;;</span>
<span class="nc" id="L87">		mdp=&quot;jambon&quot;;</span>
		
<span class="nc" id="L89">		System.out.println(&quot;\ntest de recupÃ©ration des stats avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
		try {
<span class="nc" id="L91">			System.out.println(st.getBddStat(id, mdp));</span>
<span class="nc" id="L92">		} catch (Exception e) {</span>
<span class="nc" id="L93">			e.printStackTrace();</span>
<span class="nc" id="L94">		}</span>
		
<span class="nc" id="L96">		sleep();</span>
		//test id et mdp corrects
<span class="nc" id="L98">		id=&quot;bob&quot;;</span>
<span class="nc" id="L99">		mdp=&quot;bob&quot;;</span>
		
<span class="nc" id="L101">		System.out.println(&quot;\ntest de recupÃ©ration des stats avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
		try {
<span class="nc" id="L103">			System.out.println(st.getBddStat(id, mdp));</span>
<span class="nc" id="L104">		} catch (Exception e) {</span>
<span class="nc" id="L105">			e.printStackTrace();</span>
<span class="nc" id="L106">		}</span>

		//test injection sql
<span class="nc" id="L109">		id=&quot;toto';--&quot;;</span>
<span class="nc" id="L110">		mdp=&quot;onsenfiche&quot;;</span>
		
<span class="nc" id="L112">		System.out.println(&quot;\ntest de recuperation des stats avec id:&quot;+id+&quot; mdp:&quot;+mdp+&quot; (injection sql)&quot;);</span>
		try {
<span class="nc" id="L114">			System.out.println(st.getBddStat(id, mdp));</span>
<span class="nc" id="L115">		} catch (Exception e) {</span>
<span class="nc" id="L116">			e.printStackTrace();</span>
<span class="nc" id="L117">		}</span>
		
<span class="nc" id="L119">		sleep();</span>
		
		
<span class="nc" id="L122">	}</span>

	private static void constructeur()
	{
		Stats st;
		//test avec constructeur bdd id faux
<span class="nc" id="L128">		String id=&quot;toto&quot;;</span>
<span class="nc" id="L129">		String mdp=&quot;bob&quot;;</span>
<span class="nc" id="L130">		System.out.println(&quot;\ntest du constructeur Stats(&quot;+id+&quot;,&quot;+mdp+&quot;)&quot;);</span>
		try {
<span class="nc" id="L132">			st=new Stats(id,mdp);</span>
<span class="nc" id="L133">		} catch (Exception e1) {</span>
<span class="nc" id="L134">			e1.printStackTrace();</span>
<span class="nc" id="L135">		}</span>
<span class="nc" id="L136">		sleep();</span>
		
		
		//test avec constructeur bdd id correct
<span class="nc" id="L140">		id=&quot;bob&quot;;</span>
<span class="nc" id="L141">		mdp=&quot;bob &quot;;</span>
<span class="nc" id="L142">		System.out.println(&quot;\ntest du constructeur Stats(&quot;+id+&quot;,&quot;+mdp+&quot;)&quot;);</span>
		try {
<span class="nc" id="L144">			st=new Stats(id,mdp);</span>
<span class="nc" id="L145">		} catch (Exception e1) {</span>
<span class="nc" id="L146">			e1.printStackTrace();</span>
<span class="nc" id="L147">		}</span>
<span class="nc" id="L148">		sleep();</span>
		
		//test avec constructeur par defaut
<span class="nc" id="L151">		System.out.println(&quot;\ntest du constructeur Stats()&quot;);</span>
		try {
<span class="nc" id="L153">			st=new Stats();</span>
<span class="nc" id="L154">			System.out.println(st);</span>
<span class="nc" id="L155">		} catch (Exception e1) {</span>
<span class="nc" id="L156">			e1.printStackTrace();</span>
<span class="nc" id="L157">		}</span>
<span class="nc" id="L158">		sleep();</span>
		
		//test avec constructeur champ a champ
<span class="nc" id="L161">		System.out.println(&quot;\ntest du constructeur Stats(2,54,12,5,6)&quot;);</span>
		try {
<span class="nc" id="L163">			st=new Stats(2,54,12,5,6);</span>
<span class="nc" id="L164">			System.out.println(st);</span>
<span class="nc" id="L165">		} catch (Exception e1) {</span>
<span class="nc" id="L166">			e1.printStackTrace();</span>
<span class="nc" id="L167">		}</span>
<span class="nc" id="L168">		sleep();</span>
		
		//test avec constructeur champ a champ
<span class="nc" id="L171">		System.out.println(&quot;\ntest du constructeur Stats(-2,54,12,5,6)&quot;);</span>
		try {
<span class="nc" id="L173">			st=new Stats(-2,54,12,5,6);</span>
<span class="nc" id="L174">			System.out.println(st);</span>
<span class="nc" id="L175">		} catch (Exception e1) {</span>
<span class="nc" id="L176">			e1.printStackTrace();</span>
<span class="nc" id="L177">		}</span>
<span class="nc" id="L178">		sleep();</span>
		
		//test avec constructeur par copie
<span class="nc" id="L181">		System.out.println(&quot;\ntest du constructeur Stats(new Stats(5,4,2,2,600))&quot;);</span>
		try {
<span class="nc" id="L183">			st=new Stats(new Stats(5,4,2,2,600));</span>
<span class="nc" id="L184">			System.out.println(st);</span>
<span class="nc" id="L185">		} catch (Exception e1) {</span>
<span class="nc" id="L186">			e1.printStackTrace();</span>
<span class="nc" id="L187">		}</span>
<span class="nc" id="L188">		sleep();</span>
<span class="nc" id="L189">	}</span>
	
	
	private static void equals()
	{
		
<span class="nc" id="L195">		Stats s=new Stats(1,2,3,4,5);</span>
<span class="nc" id="L196">		System.out.println(&quot;\ns= &quot;+s);</span>
		
<span class="nc" id="L198">		System.out.println(&quot;s.equals(s): &quot;+s.equals(s));</span>
		
<span class="nc" id="L200">		System.out.println(&quot;s.equals(new Stats(1,2,3,4,5)): &quot;+s.equals(new Stats(1,2,3,4,5)));</span>
		
<span class="nc" id="L202">		System.out.println(&quot;s.equals(new Stats(1,2,3,4,0)): &quot;+s.equals(new Stats(1,2,3,4,0)));</span>
		
<span class="nc" id="L204">		System.out.println(&quot;s.equals(new Stats(0,2,3,4,5)): &quot;+s.equals(new Stats(0,2,3,4,5)));</span>
		
<span class="nc" id="L206">		System.out.println(&quot;s.equals(new Stats(1,7,98,45,7)): &quot;+s.equals(new Stats(1,7,98,45,7)));</span>
		
<span class="nc" id="L208">		System.out.println(&quot;s.equals(new Chronometer()): &quot;+s.equals(new Chronometer()));</span>
<span class="nc" id="L209">	}</span>
	
	private static void sauvegarder()
	{
<span class="nc" id="L213">		String id=&quot;bob&quot;; </span>
<span class="nc" id="L214">		String mdp=&quot;bob&quot;;</span>
<span class="nc" id="L215">		Stats s1=new Stats(1,2,3,4,5);</span>
<span class="nc" id="L216">		Stats s2=new Stats(28,27,30,15,500);</span>
		
<span class="nc" id="L218">		System.out.println(&quot;\ns1= &quot;+s1);</span>
<span class="nc" id="L219">		System.out.println(&quot;s2= &quot;+s2);</span>
		
		//id corect s1
		try {
<span class="nc" id="L223">			System.out.println(&quot;\ntest de sauvegarde de s1 avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
<span class="nc" id="L224">			s1.sauvegarder(id, mdp);</span>
<span class="nc" id="L225">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L226">			System.out.print(s1.getBddStat(id, mdp));</span>
			
<span class="nc" id="L228">		} catch (BddException e) {</span>
<span class="nc" id="L229">			e.printStackTrace();</span>
<span class="nc" id="L230">		}</span>
<span class="nc" id="L231">		sleep();</span>
		
		
		//id corect s2
		try {
<span class="nc" id="L236">			System.out.println(&quot;\n\n\ntest de sauvegarde de s2 avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
<span class="nc" id="L237">			s2.sauvegarder(id, mdp);</span>
<span class="nc" id="L238">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L239">			System.out.print(s2.getBddStat(id, mdp));</span>
			
			
			
<span class="nc" id="L243">		} catch (BddException e) {</span>
<span class="nc" id="L244">			e.printStackTrace();</span>
<span class="nc" id="L245">		}</span>
<span class="nc" id="L246">		sleep();</span>
		
		//id incorect
<span class="nc" id="L249">		id=&quot;bob&quot;; </span>
<span class="nc" id="L250">		mdp=&quot;pigeon&quot;;</span>
		try {
<span class="nc" id="L252">			System.out.println(&quot;\n\n\ntest de sauvegarde de s2 avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
<span class="nc" id="L253">			s2.sauvegarder(id, mdp);</span>
<span class="nc" id="L254">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L255">			System.out.print(s2.getBddStat(id, mdp));</span>
			
<span class="nc" id="L257">		} catch (BddException e) {</span>
<span class="nc" id="L258">			e.printStackTrace();</span>
<span class="nc" id="L259">		}</span>
<span class="nc" id="L260">		sleep();</span>
		
		//mot de passe avec des espaces
<span class="nc" id="L263">		mdp=&quot;   &quot;;</span>
		try {
<span class="nc" id="L265">			System.out.println(&quot;\n\n\ntest de sauvegarde de s2 avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
<span class="nc" id="L266">			s2.sauvegarder(id, mdp);</span>
<span class="nc" id="L267">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L268">			System.out.print(s2.getBddStat(id, mdp));</span>
			
<span class="nc" id="L270">		} catch (BddException e) {</span>
<span class="nc" id="L271">			e.printStackTrace();</span>
<span class="nc" id="L272">		}</span>
<span class="nc" id="L273">		sleep();</span>
		
		//id avec des espaces
<span class="nc" id="L276">		mdp=&quot;bob&quot;;</span>
<span class="nc" id="L277">		id=&quot;   &quot;;</span>
		try {
<span class="nc" id="L279">			System.out.println(&quot;\n\n\ntest de sauvegarde de s2 avec id:&quot;+id+&quot; mdp:&quot;+mdp);</span>
<span class="nc" id="L280">			s2.sauvegarder(id, mdp);</span>
<span class="nc" id="L281">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L282">			System.out.print(s2.getBddStat(id, mdp));</span>
			
<span class="nc" id="L284">		} catch (BddException e) {</span>
<span class="nc" id="L285">			e.printStackTrace();</span>
<span class="nc" id="L286">		}</span>
<span class="nc" id="L287">		sleep();</span>
		
		//injection SQL
<span class="nc" id="L290">		mdp=&quot;autre&quot;;</span>
<span class="nc" id="L291">		id=&quot;bob';--&quot;;</span>
		try {
<span class="nc" id="L293">			System.out.println(&quot;\n\n\ntest de sauvegarde de s2 avec id:&quot;+id+&quot; mdp:&quot;+mdp+&quot; (injection sql)&quot;);</span>
<span class="nc" id="L294">			s1.sauvegarder(id, mdp);</span>
<span class="nc" id="L295">			System.out.println(&quot;rÃ©sultat (lecture depuis bdd): &quot;);</span>
<span class="nc" id="L296">			System.out.print(s2.getBddStat(&quot;bob&quot;, &quot;bob&quot;));</span>
			
<span class="nc" id="L298">		} catch (BddException e) {</span>
<span class="nc" id="L299">			e.printStackTrace();</span>
<span class="nc" id="L300">		}</span>
<span class="nc" id="L301">		sleep();</span>
<span class="nc" id="L302">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>